{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block extra_styles %}
    {# Link to your new demo-specific stylesheet #}
    <link rel="stylesheet" href="{% static 'css/demo_styles.css' %}">
{% endblock %}

{% block content %}
    <div class="banner_section_demo layout_padding">
        <div class="container h-100 d-flex align-items-center justify-content-center">
            <div id="my_slider" class="carousel slide w-100" data-bs-ride="carousel" data-bs-interval="5000"> 
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="row justify-content-center">
                            <div class="col-sm-12 text-center">
                                <div class="buynow_bt"><a href="{% url 'hub:car_list' %}">Buy Now</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row justify-content-center">
                            <div class="col-sm-12 text-center">
                                <div class="buynow_bt"><a href="{% url 'hub:used_car_list' %}">Used Cars</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row justify-content="center">
                            <div class="col-sm-12 text-center">
                                <div class="buynow_bt"><a href="{% url 'hub:job_list' %}">Jobs</a></div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#my_slider" data-bs-slide="prev">
                    <i class="fa fa-angle-left"></i>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#my_slider" data-bs-slide="next">
                    <i class="fa fa-angle-right"></i>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>
    <div class="news_section_demo layout_padding">
        <div class="container h-100 d-flex align-items-center justify-content-center">
            <div id="news_slider" class="carousel slide w-100" data-bs-ride="carousel" data-bs-interval="5000"> 
                <div class="latest_news_heading">
                    <h2>Latest News</h2>
                </div>
                <div class="carousel-inner">
                    {% for car in latest_news_cars %}
                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                        <div class="row justify-content-center">
                            <div class="col-sm-12 text-center">
                                <a href="{% url 'hub:news' %}"> 
                                    {% if car.image %}
                                        <img src="{{ car.image.url }}" alt="{{ car.name }} image" class="img-fluid news-item"/>
                                    {% else %}
                                        <img src="https://placehold.co/600x350/EFEFEF/AAAAAA?text=No+Image" alt="No Image Available" class="img-fluid news-item"/>
                                    {% endif %}
                                    <h3 class="mt-3">{{ car.name }} {{ car.model }} Update</h3>
                                    <p class="text-muted">{{ car.description|truncatechars:150 }}</p>
                                </a>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="carousel-item active">
                        <div class="row justify-content-center">
                            <div class="col-sm-12 text-center">
                                <a href="{% url 'hub:news' %}">
                                    <img src="https://placehold.co/600x350/EFEFEF/AAAAAA?text=No+News+Available" alt="No News Available" class="img-fluid news-item"/>
                                    <h3 class="mt-3">No News Available</h3>
                                    <p class="text-muted">Stay tuned for the latest updates from Ziber Autohub!</p>
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                {% if latest_news_cars|length > 1 %}
                <button class="carousel-control-prev news-carousel-control" type="button" data-bs-target="#news_slider" data-bs-slide="prev"> 
                    <i class="fa fa-angle-left"></i>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next news-carousel-control" type="button" data-bs-target="#news_slider" data-bs-slide="next"> 
                    <i class="fa fa-angle-right"></i>
                    <span class="visually-hidden">Next</span>
                </button>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="new_launch_section_demo layout_padding">
        <div class="container">
            <div class="text-center mb-4">
                <h2 class="text-uppercase new-launch-heading">New Launch Products</h2>
            </div>

            <div id="new_launch_slider" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"> 
                <div class="carousel-inner">
                    {% for car in featured_new_cars %} 
                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                        <div class="row justify-content-center">
                            <div class="col-sm-4 text-center">
                                <div class="product_item">
                                    {% if car.image %}
                                        <img src="{{ car.image.url }}" alt="{{ car.name }} image" class="img-fluid product-img">
                                    {% else %}
                                        <img src="https://placehold.co/400x200/EFEFEF/AAAAAA?text=No+Image" alt="No Image Available" class="img-fluid product-img">
                                    {% endif %}
                                    <h4 class="product_title product-title-style">{{ car.name }} {{ car.model }}</h4>
                                    <p class="product_description product-description-style">
                                        {{ car.description|truncatechars:150 }}
                                    </p>
                                    <div class="mt-3">
                                        <a href="{% url 'hub:car_detail' pk=car.pk %}" class="btn buynow_bt btn-sm">View Details</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                     <div class="carousel-item active">
                        <div class="row justify-content-center">
                            <div class="col-sm-4 text-center">
                                <div class="product_item">
                                    <img src="https://placehold.co/400x200/EFEFEF/AAAAAA?text=No+Products" alt="No Products" class="img-fluid product-img">
                                    <h4 class="product_title product-title-style">No New Products Yet!</h4>
                                    <p class="product_description product-description-style">
                                        Stay tuned for our exciting new releases.
                                    </p>
                                    <div class="mt-3">
                                        <a href="{% url 'hub:new_car_list' %}" class="btn btn-primary btn-sm">Browse Cars</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                {% if featured_new_cars|length > 1 %}
                <button class="carousel-control-prev product-carousel-control" type="button" data-bs-target="#new_launch_slider" data-bs-slide="prev"> 
                    <i class="fa fa-angle-left"></i>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next product-carousel-control" type="button" data-bs-target="#new_launch_slider" data-bs-slide="next"> 
                    <i class="fa fa-angle-right"></i>
                    <span class="visually-hidden">Next</span>
                </button>
                {% endif %}
            </div>
        </div>
    </div>
    {% endblock %}

{% block extra_scripts %}
    {{ block.super }} 
{% endblock %}